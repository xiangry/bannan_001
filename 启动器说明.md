# 🚀 数学漫画生成器 - 启动器说明

## 快速启动

### 最简单的方式
双击运行：**`启动.bat`**

或者运行：
```bash
powershell -ExecutionPolicy Bypass -File launcher-simple.ps1
```

## 📦 已创建的启动器文件

### 1. `启动.bat` - 最简单的启动方式
- 双击即可运行
- 自动启动API和Vue服务
- 每个服务在独立窗口中运行

### 2. `launcher-simple.ps1` - 简化版启动器
- 功能完整但更稳定
- 支持参数：`-ApiOnly`、`-VueOnly`
- 在新窗口中启动服务

### 3. `launcher.ps1` - 完整版启动器
- 包含日志监控
- 自动测试功能
- 实时输出日志
- 支持更多参数

### 4. `quick-test.ps1` - 快速测试脚本
- 测试API健康检查
- 测试配置状态
- 测试提示词生成

## 🎯 使用步骤

### 步骤1: 启动服务
```bash
启动.bat
```

### 步骤2: 等待服务启动
- API服务：等待约10-15秒
- Vue服务：等待约5-10秒

### 步骤3: 测试服务（可选）
在另一个终端运行：
```bash
powershell -ExecutionPolicy Bypass -File quick-test.ps1
```

### 步骤4: 访问前端
打开浏览器访问：http://localhost:5173

## 🔧 启动参数

### 只启动API
```powershell
launcher-simple.ps1 -ApiOnly
```

### 只启动Vue
```powershell
launcher-simple.ps1 -VueOnly
```

## 📊 服务地址

- **API服务**: https://localhost:7109
- **API健康检查**: https://localhost:7109/api/comic/health
- **API配置状态**: https://localhost:7109/api/comic/config-status
- **Vue前端**: http://localhost:5173

## 🛑 停止服务

关闭对应的PowerShell窗口即可停止服务。

## ⚠️ 常见问题

### 问题1: PowerShell执行策略错误
**解决：**
```powershell
Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope CurrentUser
```

### 问题2: 端口被占用
启动器会自动清理端口，如果仍有问题：
```powershell
# 查看占用端口的进程
Get-NetTCPConnection -LocalPort 7109

# 关闭进程
Stop-Process -Id <进程ID> -Force
```

### 问题3: API启动失败
1. 检查.NET 8是否安装：`dotnet --version`
2. 检查配置文件：`MathComicGenerator.Api\appsettings.json`
3. 查看API窗口中的错误信息

### 问题4: Vue启动失败
1. 检查Node.js是否安装：`node --version`
2. 安装依赖：`cd MathComicGenerator.Web.Vue && npm install`
3. 查看Vue窗口中的错误信息

## 📝 日志文件

完整版启动器会生成日志：
- API日志：`logs\api-YYYYMMDD-HHmmss.log`
- Vue日志：`logs\vue-YYYYMMDD-HHmmss.log`

## ✅ 功能特性

### 启动器功能
- ✅ 自动环境检查
- ✅ 自动清理端口
- ✅ 独立窗口运行
- ✅ 健康检查
- ✅ 自动测试（完整版）

### 测试功能
- ✅ API健康检查
- ✅ 配置状态检查
- ✅ 提示词生成测试
- ✅ 错误详情显示

## 🎉 开始使用

1. 运行 `启动.bat`
2. 等待服务启动完成
3. 访问 http://localhost:5173
4. 开始生成数学漫画！

