# 数学漫画生成器 - 快速配置指南

## 🚀 5分钟快速上手

### 步骤1: 获取Gemini API密钥

1. **访问Google AI Studio**: https://aistudio.google.com/
2. **登录Google账号**
3. **创建API密钥**:
   - 点击 "Get API Key"
   - 选择 "Create API Key"
   - 复制生成的API密钥

### 步骤2: 配置API密钥

1. **打开配置文件**: `MathComicGenerator.Api/appsettings.json`
2. **替换占位符**:
   ```json
   {
     "GeminiAPI": {
       "ApiKey": "YOUR_ACTUAL_API_KEY_HERE"  // 替换为真实密钥
     }
   }
   ```

### 步骤3: 启动应用

```bash
# Windows
start-dev.bat

# Linux/Mac
chmod +x start-dev.sh
./start-dev.sh
```

### 步骤4: 验证配置

访问配置状态页面确认设置正确：
```
https://localhost:7109/api/comic/config-status
```

## 🔧 配置验证状态说明

### ✅ 配置正确
```json
{
  "isValid": true,
  "configuration": {
    "GeminiAPI": {
      "HasApiKey": true
    }
  }
}
```

### ❌ 需要配置API密钥
```json
{
  "isValid": false,
  "configuration": {
    "GeminiAPI": {
      "HasApiKey": false
    }
  }
}
```

## 🎯 开发模式说明

**当前状态**: 应用在开发模式下运行，即使API密钥未配置也会启动。

**日志信息解读**:
- `已创建存储目录` ✅ - 数据存储准备就绪
- `配置验证失败` ⚠️ - 需要配置API密钥
- `开发环境：忽略配置验证错误` ℹ️ - 开发模式继续运行

## 🛠️ 故障排除

### 问题1: API密钥无效
**现象**: 配置了密钥但仍显示无效
**解决**: 
1. 检查密钥是否完整复制
2. 确认密钥没有多余的空格
3. 验证Google AI Studio中密钥状态

### 问题2: 无法访问Google AI Studio
**现象**: 网络无法访问Google服务
**解决**:
1. 检查网络连接
2. 使用VPN（如需要）
3. 联系网络管理员

### 问题3: API配额限制
**现象**: 密钥有效但API调用失败
**解决**:
1. 检查Google AI Studio中的配额使用情况
2. 升级API计划（如需要）
3. 等待配额重置

## 📋 完整配置检查清单

- [ ] 获取Gemini API密钥
- [ ] 更新appsettings.json文件
- [ ] 启动应用服务
- [ ] 验证配置状态
- [ ] 测试漫画生成功能

## 🎉 配置完成后

一旦API密钥配置正确，您就可以：

1. **生成数学漫画**: 输入数学概念，AI将生成教育漫画
2. **自定义选项**: 选择年龄组、面板数量等
3. **管理历史**: 查看、保存、分享生成的漫画
4. **监控状态**: 通过API端点监控系统健康状态

## 💡 提示

- **免费配额**: Google AI Studio提供免费的API调用配额
- **开发测试**: 可以先用少量测试确认功能正常
- **生产部署**: 生产环境建议配置付费计划确保稳定性

---

**需要帮助？** 查看 [故障排除指南.md](./故障排除指南.md) 获取更多详细信息。