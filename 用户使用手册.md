# 数学漫画生成器 - 用户使用手册

## 📖 产品简介

数学漫画生成器是一个创新的教育工具，专为儿童数学学习设计。它使用先进的AI技术（Gemini API）将抽象的数学概念转化为生动有趣的多格漫画，让孩子们在轻松愉快的氛围中学习数学知识。

### 🎯 目标用户
- **教师**: 制作生动的数学教学材料
- **家长**: 帮助孩子理解数学概念
- **学生**: 通过视觉化方式学习数学

### ✨ 核心功能
- 🧮 数学概念输入和验证
- 🎨 AI驱动的多格漫画生成
- 👶 年龄适宜的内容控制
- ⚙️ 可自定义的生成选项
- 📚 漫画历史管理和导出

## 🚀 快速开始

### 系统要求
- **.NET 8 Runtime** 或更高版本
- **现代浏览器** (Chrome, Firefox, Safari, Edge)
- **网络连接** (用于AI服务调用)

### 启动应用

#### 开发环境
```bash
# 启动API服务 (后端)
dotnet run --project MathComicGenerator.Api

# 启动Web界面 (前端)
dotnet run --project MathComicGenerator.Web
```

#### 生产环境
```bash
# 发布应用
dotnet publish --configuration Release

# 运行发布版本
dotnet MathComicGenerator.Web.dll
```

### 访问地址
- **Web界面**: https://localhost:5001 (或配置的端口)
- **API文档**: https://localhost:7001/swagger (开发环境)

## 📱 界面使用指南

### 主界面布局

```
┌─────────────────────────────────────────────────┐
│                数学漫画生成器                    │
├─────────────────────────────────────────────────┤
│  📝 数学概念输入区                               │
│  ⚙️ 生成选项设置                                │
│  🎨 漫画显示区域                                │
│  📚 历史记录管理                                │
└─────────────────────────────────────────────────┘
```

### 1. 数学概念输入

#### 输入框功能
- **概念输入**: 输入要解释的数学概念
- **实时验证**: 自动检测输入是否为有效的数学概念
- **智能提示**: 提供概念建议和格式指导

#### 有效输入示例
```
✅ 正确示例:
- "加法运算"
- "分数的概念"
- "几何图形：三角形"
- "乘法表：2的倍数"
- "代数：一元一次方程"

❌ 无效示例:
- 空白输入
- 非数学相关内容
- 过于复杂的概念描述
```

### 2. 生成选项设置

#### 年龄组选择
- **幼儿园 (3-5岁)**: 简单图形和基础概念
- **小学低年级 (6-8岁)**: 基础运算和数字概念
- **小学高年级 (9-12岁)**: 复杂运算和几何概念
- **初中 (13-15岁)**: 代数和高级数学概念

#### 面板数量
- **最少**: 3个面板 (简单概念)
- **标准**: 4-5个面板 (常规解释)
- **详细**: 6个面板 (复杂概念)

#### 视觉风格
- **卡通风格**: 可爱的角色和明亮色彩
- **简约风格**: 清晰简洁的图形设计
- **教育风格**: 专业的教学图表样式

### 3. 漫画生成流程

#### 步骤说明
1. **输入验证** ✅
   - 系统检查输入的数学概念
   - 显示验证结果和建议

2. **内容生成** 🎨
   - AI分析数学概念
   - 生成适合年龄的故事结构
   - 创建多格漫画内容

3. **结果展示** 📖
   - 显示生成的多格漫画
   - 提供保存和分享选项

#### 生成时间
- **简单概念**: 10-30秒
- **复杂概念**: 30-60秒
- **网络状况影响**: 可能延长等待时间

### 4. 漫画显示和操作

#### 显示功能
- **多格布局**: 清晰的面板排列
- **放大查看**: 点击面板放大显示
- **内容朗读**: 文字内容语音播放 (如支持)

#### 操作按钮
- **💾 保存**: 将漫画保存到历史记录
- **📤 分享**: 生成分享链接或导出文件
- **🔄 重新生成**: 使用相同参数重新生成
- **⚙️ 调整参数**: 修改生成选项后重新生成

### 5. 历史记录管理

#### 记录信息
- **漫画缩略图**: 快速预览
- **数学概念**: 原始输入内容
- **生成时间**: 创建日期和时间
- **参数设置**: 使用的生成选项

#### 管理操作
- **👁️ 查看**: 重新显示完整漫画
- **📤 分享**: 导出或生成分享链接
- **🗑️ 删除**: 从历史记录中移除

## 🔧 高级功能

### API接口使用

#### 生成漫画
```http
POST /api/comic/generate
Content-Type: application/json

{
  "mathConcept": "分数的加法",
  "options": {
    "panelCount": 4,
    "ageGroup": "Elementary",
    "visualStyle": "Cartoon",
    "language": "Chinese"
  }
}
```

#### 获取漫画列表
```http
GET /api/comic
```

#### 导出漫画
```http
GET /api/comic/{id}/export?format=JSON
```

### 配置选项

#### appsettings.json 配置
```json
{
  "GeminiAPI": {
    "ApiKey": "YOUR_API_KEY",
    "TimeoutSeconds": 30,
    "MaxRetries": 3
  },
  "Storage": {
    "BasePath": "./data",
    "MaxComicsPerUser": 100
  },
  "Security": {
    "EnableRateLimit": true,
    "MaxRequestsPerMinute": 60
  }
}
```

## 🛠️ 故障排除

### 常见问题

#### 1. 生成失败
**问题**: 漫画生成过程中出现错误
**解决方案**:
- 检查网络连接
- 验证API密钥配置
- 简化数学概念描述
- 稍后重试

#### 2. 加载缓慢
**问题**: 界面加载或响应缓慢
**解决方案**:
- 检查网络状况
- 清除浏览器缓存
- 重启应用服务

#### 3. 概念验证失败
**问题**: 输入的概念被标记为无效
**解决方案**:
- 使用更具体的数学术语
- 参考有效示例重新输入
- 简化概念描述

#### 4. 历史记录丢失
**问题**: 之前生成的漫画不见了
**解决方案**:
- 检查存储路径配置
- 确认数据文件完整性
- 联系技术支持

### 错误代码说明

| 错误代码 | 说明 | 解决方案 |
|---------|------|----------|
| 400 | 请求参数无效 | 检查输入格式 |
| 429 | 请求频率过高 | 稍后重试 |
| 500 | 服务器内部错误 | 联系技术支持 |
| 503 | 服务暂时不可用 | 稍后重试 |

## 📞 技术支持

### 联系方式
- **技术文档**: 查看项目README.md
- **问题反馈**: 通过GitHub Issues提交
- **功能建议**: 联系开发团队

### 日志查看
```bash
# 查看应用日志
dotnet run --project MathComicGenerator.Api --verbosity detailed

# 查看错误日志
tail -f logs/error.log
```

### 性能监控
- **系统健康**: GET /api/comic/health
- **使用统计**: GET /api/comic/statistics
- **错误统计**: GET /api/comic/system/errors

## 🔒 安全和隐私

### 数据安全
- **本地存储**: 漫画数据存储在本地服务器
- **传输加密**: 使用HTTPS加密通信
- **访问控制**: 支持用户权限管理

### 隐私保护
- **内容过滤**: 自动过滤不当内容
- **儿童安全**: 确保生成内容适合儿童
- **数据匿名**: 不收集个人敏感信息

## 📈 最佳实践

### 教学使用建议
1. **循序渐进**: 从简单概念开始
2. **互动讨论**: 结合漫画进行课堂讨论
3. **重复练习**: 利用历史记录复习
4. **个性化**: 根据学生年龄调整参数

### 内容创作技巧
1. **概念明确**: 使用准确的数学术语
2. **适度复杂**: 避免过于复杂的概念组合
3. **年龄匹配**: 选择合适的年龄组设置
4. **多样化**: 尝试不同的视觉风格

## 🔄 更新和维护

### 版本更新
```bash
# 检查更新
git pull origin main

# 重新构建
dotnet build --configuration Release

# 重启服务
systemctl restart mathcomicgenerator
```

### 数据备份
```bash
# 备份漫画数据
cp -r ./data ./backup/data-$(date +%Y%m%d)

# 备份配置文件
cp appsettings.json ./backup/
```

---

## 📝 版本信息

- **当前版本**: 1.0.0
- **发布日期**: 2024年12月
- **技术栈**: .NET 8, Blazor Server, Gemini API
- **支持平台**: Windows, Linux, macOS

---

*本文档将随着产品更新持续维护，如有疑问请联系开发团队。*