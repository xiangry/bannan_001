# 数学漫画生成器 - 启动器使用说明

## 🚀 快速启动

### 方法1: 使用批处理文件（推荐）
```bash
launcher.bat
```

### 方法2: 使用PowerShell脚本
```powershell
powershell -ExecutionPolicy Bypass -File launcher.ps1
```

## 📋 启动参数

```powershell
# 只启动API服务
launcher.ps1 -ApiOnly

# 只启动Vue前端
launcher.ps1 -VueOnly

# 跳过构建步骤
launcher.ps1 -SkipBuild

# 跳过自动测试
launcher.ps1 -SkipTest

# 自定义端口
launcher.ps1 -ApiPort 7109 -VuePort 5173
```

## 🧪 快速测试

启动服务后，在另一个终端运行：

```powershell
powershell -ExecutionPolicy Bypass -File quick-test.ps1
```

## 📊 功能特性

### 启动器功能
- ✅ 自动检查环境（.NET、Node.js）
- ✅ 清理现有进程和端口占用
- ✅ 自动构建项目
- ✅ 检查配置文件
- ✅ 启动API和Vue服务
- ✅ 实时日志监控
- ✅ 自动健康检查
- ✅ 自动功能测试

### 日志监控
- API日志：`logs\api-YYYYMMDD-HHmmss.log`
- Vue日志：`logs\vue-YYYYMMDD-HHmmss.log`
- 实时控制台输出

## 🔧 故障排除

### 问题1: PowerShell执行策略错误
**解决方案：**
```powershell
Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope CurrentUser
```

### 问题2: 端口被占用
**解决方案：**
启动器会自动释放端口，如果仍有问题，手动关闭：
```powershell
# 查看占用端口的进程
Get-NetTCPConnection -LocalPort 7109 | Select-Object OwningProcess

# 关闭进程
Stop-Process -Id <进程ID> -Force
```

### 问题3: API服务启动失败
**检查：**
1. 确认.NET 8 SDK已安装：`dotnet --version`
2. 检查配置文件：`MathComicGenerator.Api\appsettings.json`
3. 查看日志文件：`logs\api-*.log`

### 问题4: Vue服务启动失败
**检查：**
1. 确认Node.js已安装：`node --version`
2. 检查依赖：`cd MathComicGenerator.Web.Vue && npm install`
3. 查看日志文件：`logs\vue-*.log`

## 📝 服务地址

启动成功后，访问以下地址：

- **API服务**: https://localhost:7109
- **API健康检查**: https://localhost:7109/api/comic/health
- **API配置状态**: https://localhost:7109/api/comic/config-status
- **Vue前端**: http://localhost:5173

## 🛑 停止服务

在启动器窗口中按 `Ctrl+C` 停止所有服务。

## 📚 更多信息

- 查看 `README.md` 了解项目详情
- 查看 `开发者文档.md` 了解开发指南
- 查看 `快速配置指南.md` 了解配置方法

